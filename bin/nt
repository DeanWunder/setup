#!/bin/bash
project=`get_project_from_current_directory`
current_time=`date +%s`
tmp_file="/tmp/nt.$current_time"
echo "Checking out master branch in all repos..."
for repo in $HOME/git/*; do
    branch="master"
    # Special case for bidfood
    if [ $project = "bidfood" ]; then
        if [ "$repo" = "$HOME/git/inductiondoc" ]; then
            branch="bidfood"
        fi
    fi
    echo -n "$repo...," >> "$tmp_file"
    cd $repo && git stash > /dev/null
    cd $repo && git checkout "$branch" > /dev/null 2>> "$tmp_file"
    cd $repo && git pull > /dev/null &
done
wait
column -t -s',' "$tmp_file"

echo "Done!"
